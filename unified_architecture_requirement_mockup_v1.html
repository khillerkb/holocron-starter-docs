<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REQ-SEC-001 | Technical Requirements System</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Work+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            /* CORE Primary Colors */
            --core-blue: #47C0E1;
            --core-navy: #043C5B;
            
            /* CORE Secondary Colors */
            --core-lightgray: #f0f1f2;
            --core-gray: #c9d0da;
            --core-teal: #009bc3;
            --core-darkblue: #0f73a3;
            --core-charcoal: #1c2b39;
            
            /* SDLC Phase Colors (from image) */
            --sdlc-setup: #6b7ab8;
            --sdlc-plan: #a94e91;
            --sdlc-build: #0f73a3;
            --sdlc-deploy: #5fa879;
            --sdlc-monitor: #d4a84f;
            
            /* Well-Architected Pillar Colors */
            --pillar-ops: #00a1c9;
            --pillar-security: #d13212;
            --pillar-reliability: #1d8102;
            --pillar-performance: #7d3c98;
            --pillar-cost: #ff9900;
            --pillar-sustainability: #16a34a;
            
            /* Neutrals */
            --gray-50: #fafafa;
            --gray-100: #f4f4f5;
            --gray-200: #e4e4e7;
            --gray-300: #d4d4d8;
            --gray-400: #a1a1aa;
            --gray-500: #71717a;
            --gray-600: #52525b;
            --gray-700: #3f3f46;
            --gray-800: #27272a;
            --gray-900: #18181b;
            
            /* Status colors */
            --status-approved: #10b981;
            --status-draft: #fbbf24;
            --status-deprecated: #ef4444;
            
            /* RFC levels */
            --rfc-must: #dc2626;
            --rfc-should: #f59e0b;
            --rfc-may: #3b82f6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Work Sans', -apple-system, sans-serif;
            background: var(--core-lightgray);
            color: var(--gray-900);
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: white;
            border-bottom: 3px solid var(--core-navy);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(4, 60, 91, 0.1);
        }

        .header-content {
            max-width: 1800px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: var(--gray-600);
        }

        .breadcrumb a {
            color: var(--core-darkblue);
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: var(--core-blue);
        }

        .header-actions {
            display: flex;
            gap: 1rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 500;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
        }

        .btn-secondary {
            background: var(--core-lightgray);
            color: var(--core-navy);
            border: 2px solid var(--core-gray);
        }

        .btn-secondary:hover {
            background: var(--core-gray);
            border-color: var(--core-navy);
        }

        .btn-primary {
            background: var(--core-blue);
            color: var(--core-navy);
            font-weight: 600;
        }

        .btn-primary:hover {
            background: var(--core-teal);
        }

        /* Main Layout */
        .container {
            max-width: 1800px;
            margin: 2rem auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 2rem;
        }

        /* Main Content */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        /* Requirement Header Card */
        .req-header {
            background: white;
            border-radius: 12px;
            border: 2px solid var(--core-navy);
            overflow: hidden;
        }

        .req-header-top {
            background: linear-gradient(135deg, var(--core-navy) 0%, var(--core-darkblue) 100%);
            padding: 1.5rem 2rem;
            color: white;
        }

        .req-id {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            color: var(--core-blue);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .req-title {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        .req-summary {
            font-size: 1.125rem;
            line-height: 1.6;
            opacity: 0.95;
        }

        .req-header-meta {
            padding: 1rem 2rem;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            border-bottom: 2px solid var(--core-lightgray);
        }

        .meta-item {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            align-items: center;
            text-align: center;
        }

        .meta-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--gray-500);
            font-weight: 600;
        }

        .meta-value {
            font-size: 0.875rem;
            color: var(--gray-900);
            font-weight: 600;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
        }

        /* Applicability Tags */
        .applicability-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.375rem;
            justify-content: flex-start;
            margin-top: 0.375rem;
        }

        .applicability-tag {
            background: var(--core-teal);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-approved {
            background: rgba(16, 185, 129, 0.1);
            color: var(--status-approved);
            border: 2px solid var(--status-approved);
        }

        .rfc-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .rfc-must {
            background: rgba(220, 38, 38, 0.1);
            color: var(--rfc-must);
            border: 2px solid var(--rfc-must);
        }

        /* Criticality Levels */
        .criticality-critical {
            background: #7d3c98;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .criticality-high {
            background: #ff0000;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            border: 2px solid #ff0000;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        /* Control Status Badges */
        .control-status {
            display: inline-block;
            padding: 0.25rem 0.625rem;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .control-effective {
            background: #006400;
            color: white;
        }

        .control-hybrid {
            background: #808080;
            color: white;
        }

        .control-automated {
            background: #006400;
            color: white;
        }

        .control-detective {
            background: #696969;
            color: white;
        }

        .control-preventive {
            background: #006400;
            color: white;
        }

        .control-frequency {
            background: #696969;
            color: white;
            padding: 0.25rem 0.625rem;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .control-frequency.upon-occurrence {
            background: #006400;
        }

        .criticality-medium {
            background: #ffa500;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .criticality-low {
            background: #ffff00;
            color: #333;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .criticality-recommended {
            background: #90ee90;
            color: #333;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .criticality-informational {
            background: #808080;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }


        /* Stakeholder Accountability Cards */
        .stakeholder-group {
            margin-bottom: 2rem;
        }

        .stakeholder-group-header {
            font-size: 0.875rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: white;
            padding: 0.75rem 1rem;
            background: linear-gradient(135deg, var(--core-blue) 0%, var(--core-darkblue) 100%);
            border-radius: 6px 6px 0 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .stakeholder-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            padding: 1rem;
            background: white;
            border: 1px solid var(--core-gray);
            border-top: none;
            border-radius: 0 0 6px 6px;
        }

        .contact-card {
            background: var(--gray-50);
            border: 1px solid var(--core-gray);
            border-radius: 6px;
            padding: 1rem;
            transition: all 0.2s ease;
        }

        .contact-card:hover {
            border-color: var(--core-blue);
            box-shadow: 0 2px 8px rgba(71, 192, 225, 0.15);
            transform: translateY(-2px);
        }

        .contact-role {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--core-navy);
            margin-bottom: 0.5rem;
            letter-spacing: 0.05em;
        }

        .contact-name {
            font-size: 1rem;
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: 0.5rem;
        }

        .contact-details {
            display: flex;
            flex-direction: column;
            gap: 0.375rem;
            font-size: 0.8rem;
        }

        .contact-detail {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--gray-600);
        }

        .contact-detail-icon {
            width: 16px;
            text-align: center;
        }

        .copy-email-btn {
            background: var(--core-blue);
            color: white;
            border: none;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            cursor: pointer;
            transition: background 0.2s;
            font-weight: 600;
            margin-left: auto;
        }

        .copy-email-btn:hover {
            background: var(--core-darkblue);
        }

        .copy-email-btn:active {
            transform: scale(0.95);
        }

        .slack-link {
            color: var(--core-blue);
            text-decoration: none;
            font-weight: 600;
        }

        .slack-link:hover {
            text-decoration: underline;
        }

        .channel-badge {
            background: var(--core-teal);
            color: white;
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .control-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .control-list-item {
            background: var(--gray-50);
            border: 1px solid var(--core-gray);
            border-radius: 6px;
            padding: 0.75rem 1rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.2s ease;
        }

        .control-list-item:hover {
            border-color: var(--core-blue);
            background: white;
        }

        .control-id {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--core-navy);
        }

        .control-owner {
            font-size: 0.85rem;
            color: var(--gray-700);
        }

        .escalation-box {
            margin-top: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(255, 0, 0, 0.05) 0%, rgba(255, 100, 0, 0.05) 100%);
            border: 2px solid #ff6b6b;
            border-radius: 8px;
        }

        .escalation-title {
            font-size: 1rem;
            font-weight: 700;
            color: #c92a2a;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .escalation-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .escalation-item {
            background: white;
            border: 1px solid #ffa8a8;
            border-radius: 6px;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.9rem;
        }

        .escalation-number {
            background: #ff6b6b;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.8rem;
            flex-shrink: 0;
        }

        .requirement-team-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            padding: 1rem;
            background: white;
            border: 1px solid var(--core-gray);
            border-top: none;
            border-radius: 0 0 6px 6px;
        }

        .engineering-team-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            padding: 1rem;
            background: white;
            border: 1px solid var(--core-gray);
            border-top: none;
            border-radius: 0 0 6px 6px;
        }

        @media (max-width: 1200px) {
            .engineering-team-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .stakeholder-cards,
            .requirement-team-grid,
            .engineering-team-grid {
                grid-template-columns: 1fr;
            }
        }

        /* SDLC Phase Tiles */
        .sdlc-phases {
            padding: 1rem 2rem;
            background: var(--gray-50);
        }

        .sdlc-title {
            font-size: 0.875rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--gray-700);
            margin-bottom: 0.75rem;
        }

        .sdlc-tile-wrapper {
            display: flex;
            flex-direction: column;
        }

        .sdlc-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
        }

        .sdlc-tile {
            background: transparent;
            border-radius: 0;
            padding: 0;
            text-align: center;
            border: none;
            transition: all 0.3s;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .sdlc-tile.active {
            transform: none;
        }

        .sdlc-tile-header {
            display: none;
        }

        .sdlc-tile-name {
            font-size: 0.875rem;
            font-weight: 700;
            color: var(--tile-color);
            margin: 0;
            padding-bottom: 0.5rem;
            text-align: center;
        }

        .sdlc-tile-separator {
            width: 100%;
            height: 2px;
            background: var(--tile-color);
            margin-bottom: 0.5rem;
        }

        .sdlc-tile-action {
            font-size: 0.75rem;
            color: var(--gray-600);
            line-height: 1.4;
            text-align: center;
        }

        /* SDLC Phase specific colors */
        .sdlc-setup { --tile-color: var(--sdlc-setup); }
        .sdlc-plan { --tile-color: var(--sdlc-plan); }
        .sdlc-build { --tile-color: var(--sdlc-build); }
        .sdlc-deploy { --tile-color: var(--sdlc-deploy); }
        .sdlc-monitor { --tile-color: var(--sdlc-monitor); }

        /* Tabs */
        .tabs {
            background: white;
            border-radius: 12px;
            border: 2px solid var(--core-navy);
            overflow: hidden;
        }

        .tab-list {
            display: flex;
            border-bottom: 2px solid var(--core-lightgray);
            background: var(--gray-50);
        }

        .tab {
            flex: 1;
            padding: 1rem;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-weight: 600;
            font-size: 0.875rem;
            color: var(--gray-600);
            cursor: pointer;
            transition: all 0.2s;
        }

        .tab.active {
            background: white;
            color: var(--core-darkblue);
            border-bottom-color: var(--core-blue);
        }

        .tab:hover:not(.active) {
            background: white;
            color: var(--gray-900);
        }

        .tab-content {
            padding: 2rem;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        /* Metamodel Grid */
        .metamodel-grid {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .metamodel-section {
            background: white;
            border: 1px solid var(--core-gray);
            border-radius: 8px;
            padding: 1.5rem;
        }

        .metamodel-section-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--core-navy);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--core-blue);
        }

        .section-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .section-grid.single-column {
            grid-template-columns: 1fr;
        }

        .field-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .field-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--gray-700);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .required-indicator {
            color: var(--rfc-must);
            font-size: 1rem;
        }

        .field-value {
            padding: 0.75rem;
            background: var(--core-lightgray);
            border: 1px solid var(--core-gray);
            border-radius: 6px;
            font-size: 0.875rem;
            color: var(--gray-900);
        }

        .field-value code {
            font-family: 'JetBrains Mono', monospace;
            background: transparent;
            padding: 0;
            border-radius: 3px;
            font-size: 0.8125rem;
            color: var(--core-navy);
            font-weight: 600;
        }

        .field-value ul {
            margin: 0;
            padding-left: 1.25rem;
        }

        .field-value ul li {
            margin-bottom: 0.25rem;
        }

        /* AWS Pillar Tags */
        .pillar-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .pillar-tag {
            padding: 0.375rem 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            border: 2px solid;
            display: flex;
            align-items: center;
            gap: 0.375rem;
        }

        .pillar-tag a {
            color: inherit;
            text-decoration: none;
        }

        .pillar-tag a:hover {
            text-decoration: underline;
        }

        .pillar-ops {
            background: rgba(0, 161, 201, 0.1);
            border-color: var(--pillar-ops);
            color: var(--pillar-ops);
        }

        .pillar-security {
            background: rgba(209, 50, 18, 0.1);
            border-color: var(--pillar-security);
            color: var(--pillar-security);
        }

        .pillar-reliability {
            background: rgba(29, 129, 2, 0.1);
            border-color: var(--pillar-reliability);
            color: var(--pillar-reliability);
        }

        /* Code Block */
        .code-block {
            background: var(--gray-900);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            margin-bottom: 1.5rem;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1.5rem;
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .code-language {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--core-blue);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .code-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .code-version {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--gray-400);
            padding: 0.25rem 0.5rem;
            background: rgba(255,255,255,0.05);
            border-radius: 4px;
        }

        .code-github {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
        }

        .code-github:hover {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        .code-expand {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .code-expand:hover {
            background: rgba(255,255,255,0.2);
        }

        .code-copy {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .code-copy:hover {
            background: rgba(255,255,255,0.2);
        }

        .code-body {
            max-height: 200px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .code-body.expanded {
            max-height: none;
        }

        pre {
            margin: 0;
            padding: 1.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8125rem;
            line-height: 1.6;
            color: #e5e7eb;
            overflow-x: auto;
        }

        .code-keyword { color: #f472b6; }
        .code-string { color: #a78bfa; }
        .code-comment { color: #6b7280; font-style: italic; }
        .code-function { color: #60a5fa; }
        .code-variable { color: #fbbf24; }

        /* Rules Section */
        .rules-section {
            margin-top: 2rem;
        }

        .rule-item {
            background: white;
            border: 2px solid var(--core-gray);
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            transition: all 0.2s;
        }

        .rule-item:hover {
            border-color: var(--core-blue);
            box-shadow: 0 4px 12px rgba(71, 192, 225, 0.15);
        }

        .rule-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 0.75rem;
        }

        .rule-id {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            font-weight: 700;
            color: var(--core-darkblue);
        }

        .rule-type {
            padding: 0.25rem 0.75rem;
            background: var(--core-lightgray);
            border: 1px solid var(--core-gray);
            border-radius: 16px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .rule-content {
            font-size: 0.875rem;
            color: var(--gray-700);
            margin-bottom: 0.75rem;
            line-height: 1.6;
        }

        .rule-control {
            font-size: 0.75rem;
            color: var(--gray-600);
            background: var(--core-lightgray);
            padding: 0.5rem;
            border-radius: 4px;
            border-left: 3px solid var(--core-teal);
        }

        .rule-control strong {
            color: var(--core-darkblue);
        }

        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .sidebar-card {
            background: white;
            border-radius: 12px;
            border: 2px solid var(--core-navy);
            padding: 1.5rem;
        }

        .sidebar-title {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--core-navy);
        }

        .info-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .info-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--gray-500);
            font-weight: 600;
        }

        .info-value {
            font-size: 0.875rem;
            color: var(--gray-900);
        }

        .link-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .link-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            background: var(--core-lightgray);
            border-radius: 6px;
            text-decoration: none;
            color: var(--core-darkblue);
            font-size: 0.875rem;
            transition: all 0.2s;
            border: 1px solid var(--core-gray);
        }

        .link-item:hover {
            background: var(--core-blue);
            color: var(--core-navy);
            transform: translateX(4px);
        }

        .tag-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .tag {
            padding: 0.25rem 0.75rem;
            background: var(--core-lightgray);
            border: 1px solid var(--core-gray);
            border-radius: 16px;
            font-size: 0.75rem;
            color: var(--core-navy);
            font-weight: 500;
        }

        /* Hierarchical Traceability */
        .trace-tree {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            line-height: 1.8;
        }

        .trace-level-0 {
            color: var(--core-navy);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .trace-level-1 {
            color: var(--core-darkblue);
            font-weight: 600;
            padding-left: 1rem;
            position: relative;
        }

        .trace-level-1::before {
            content: "‚îî‚îÄ";
            position: absolute;
            left: 0;
            color: var(--core-gray);
        }

        .trace-level-2 {
            color: var(--gray-700);
            font-weight: 500;
            padding-left: 2rem;
            position: relative;
        }

        .trace-level-2::before {
            content: "‚îî‚îÄ";
            position: absolute;
            left: 1rem;
            color: var(--core-gray);
        }

        .trace-level-3 {
            color: var(--gray-600);
            font-weight: 400;
            padding-left: 3rem;
            position: relative;
            margin-bottom: 0.25rem;
        }

        .trace-level-3::before {
            content: "‚îî‚îÄ";
            position: absolute;
            left: 2rem;
            color: var(--core-gray);
        }

        .trace-level-3 a {
            color: var(--core-teal);
            text-decoration: none;
        }

        .trace-level-3 a:hover {
            text-decoration: underline;
        }

        .trace-icon {
            margin-right: 0.375rem;
        }

        /* Validation Rules */
        .validation-rules {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .validation-rule {
            padding: 0.75rem;
            background: var(--gray-50);
            border-left: 3px solid var(--status-approved);
            border-radius: 4px;
            font-size: 0.875rem;
        }

        .validation-rule.warning {
            border-left-color: var(--status-draft);
            background: rgba(251, 191, 36, 0.05);
        }

        /* Responsive */
        @media (max-width: 1400px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .metamodel-grid {
                grid-template-columns: 1fr;
            }

            .sdlc-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {
            .sdlc-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .main-content > * {
            animation: fadeInUp 0.5s ease-out;
        }

        .main-content > *:nth-child(1) { animation-delay: 0.05s; }
        .main-content > *:nth-child(2) { animation-delay: 0.1s; }
        .main-content > *:nth-child(3) { animation-delay: 0.15s; }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="breadcrumb">
                <a href="#">Home</a>
                <span>/</span>
                <a href="#">Requirements</a>
                <span>/</span>
                <a href="#">Security</a>
                <span>/</span>
                <span>REQ-SEC-001</span>
            </div>
            <div class="header-actions">
                <button class="btn btn-secondary">Export</button>
                <button class="btn btn-secondary">Version History</button>
                <button class="btn btn-primary">Edit Requirement</button>
            </div>
        </div>
    </header>

    <div class="container">
        <main class="main-content">
            <!-- Requirement Header -->
            <div class="req-header">
                <div class="req-header-top">
                    <div class="req-id">REQ-SEC-001</div>
                    <h1 class="req-title">Multi-Factor Authentication Implementation</h1>
                    <p class="req-summary">The system MUST implement multi-factor authentication (MFA) for all user access points, requiring at least two independent factors for authentication verification.</p>
                </div>
                <div class="req-header-meta">
                    <div class="meta-item">
                        <div class="meta-label">Status</div>
                        <div class="meta-value">
                            <span class="status-badge status-approved">
                                <span></span>
                                Approved
                            </span>
                        </div>
                    </div>
                    <div class="meta-item">
                        <div class="meta-label">Requirement Level</div>
                        <div class="meta-value">
                            <span class="rfc-badge rfc-must">MUST</span>
                        </div>
                    </div>
                    <div class="meta-item">
                        <div class="meta-label">Risk Level</div>
                        <div class="meta-value">
                            <span class="criticality-high">High</span>
                        </div>
                    </div>
                    <div class="meta-item">
                        <div class="meta-label">Version</div>
                        <div class="meta-value">2.1.0</div>
                    </div>
                </div>

                <!-- SDLC Phases -->
                <div class="sdlc-phases">
                    <div class="sdlc-title">Applicable SDLC Phases</div>
                    <div class="sdlc-grid">
                        <div class="sdlc-tile-wrapper">
                            <div class="sdlc-tile sdlc-plan active">
                                <div class="sdlc-tile-name">Plan & Design</div>
                            </div>
                            <div class="sdlc-tile-separator sdlc-plan" style="background: var(--sdlc-plan);"></div>
                            <div class="sdlc-tile-action">Identify MFA requirements in architecture</div>
                        </div>
                        <div class="sdlc-tile-wrapper">
                            <div class="sdlc-tile sdlc-build active">
                                <div class="sdlc-tile-name">Build & Test</div>
                            </div>
                            <div class="sdlc-tile-separator sdlc-build" style="background: var(--sdlc-build);"></div>
                            <div class="sdlc-tile-action">Implement and test MFA flows</div>
                        </div>
                        <div class="sdlc-tile-wrapper">
                            <div class="sdlc-tile sdlc-deploy active">
                                <div class="sdlc-tile-name">Deploy & Release</div>
                            </div>
                            <div class="sdlc-tile-separator sdlc-deploy" style="background: var(--sdlc-deploy);"></div>
                            <div class="sdlc-tile-action">Validate MFA policy enforcement</div>
                        </div>
                        <div class="sdlc-tile-wrapper">
                            <div class="sdlc-tile sdlc-monitor active">
                                <div class="sdlc-tile-name">Monitor & Maintain</div>
                            </div>
                            <div class="sdlc-tile-separator sdlc-monitor" style="background: var(--sdlc-monitor);"></div>
                            <div class="sdlc-tile-action">Monitor MFA compliance drift</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tabs -->
            <div class="tabs">
                <div class="tab-list">
                    <button class="tab active" data-tab="metamodel">Metamodel</button>
                    <button class="tab" data-tab="rules">Requirement Rules</button>
                    <button class="tab" data-tab="agents">Agent Instructions</button>
                    <button class="tab" data-tab="policy">Policy-as-Code</button>
                    <button class="tab" data-tab="validation">Validation</button>
                    <button class="tab" data-tab="accountability">Accountable</button>
                </div>

                <!-- Metamodel Tab -->
                <div class="tab-content">
                    <div class="tab-panel active" id="metamodel">
                        <h2 style="margin-bottom: 1.5rem; font-size: 1.25rem; font-weight: 700;">Requirement Attributes</h2>
                        
                                                                                                                                                <div class="metamodel-grid">
                            <!-- Core Identity Section -->
                            <div class="metamodel-section">
                                <div class="section-grid">
                                    <div class="field-group">
                                        <label class="field-label">
                                            <span class="required-indicator">*</span>
                                            Requirement ID
                                        </label>
                                        <div class="field-value"><code>REQ-SEC-001</code></div>
                                    </div>

                                    <div class="field-group">
                                        <label class="field-label">
                                            <span class="required-indicator">*</span>
                                            Requirement Type
                                        </label>
                                        <div class="field-value">Functional Security Requirement</div>
                                    </div>
                                </div>
                                
                                <div class="section-grid single-column" style="margin-top: 1.5rem;">
                                    <div class="field-group">
                                        <label class="field-label">
                                            <span class="required-indicator">*</span>
                                            Pillar/Category
                                        </label>
                                        <div class="field-value">Security / Identity & Access Management</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Governance, Compliance & Implementation Section (REORDERED) -->
                            <div class="metamodel-section">
                                <div class="section-grid single-column">
                                    <div class="field-group">
                                        <label class="field-label">
                                            Rationale
                                        </label>
                                        <div class="field-value">Prevents unauthorized access through compromised credentials; aligns with zero-trust architecture principles and regulatory requirements.</div>
                                    </div>

                                    <div class="field-group">
                                        <label class="field-label">
                                            Acceptance Criteria
                                        </label>
                                        <div class="field-value">
                                            <ul>
                                                <li>MFA enforced for 100% of user accounts</li>
                                                <li>Minimum 2 authentication factors required</li>
                                                <li>Support for TOTP, WebAuthn, SMS</li>
                                                <li>Grace period: 24 hours for new users</li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="field-group">
                                        <label class="field-label">
                                            Registered Controls
                                        </label>
                                        <div class="field-value">
                                            <ul>
                                                <li>CTRL-1106339: Password Configuration - Non-SSO Database Layer [Cyber]</li>
                                                <li>CTRL-1106338: Password Configuration - Non-SSO Application Layer [Cyber]</li>
                                                <li>CTRL-1106173: SSO Application Authentication Session Management</li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="field-group">
                                        <label class="field-label">
                                            PSP (Policy, Standard, Procedure)
                                        </label>
                                        <div class="field-value">
                                            <ul>
                                                <li><strong>Policy:</strong> 2701 Information Security Policy</li>
                                                <li><strong>Standard:</strong> 2701.1.001 Information Security Standard</li>
                                                <li><strong>Procedure:</strong> Authentication & Identity Proofing Procedure [2701.2.059]</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="section-grid" style="margin-top: 1.5rem;">
                                    <div class="field-group">
                                        <label class="field-label">
                                            Industry Standard
                                        </label>
                                        <div class="field-value">IEEE/ISO/IEC 29148-2018, NIST 800-63B</div>
                                    </div>

                                    <div class="field-group">
                                        <label class="field-label">
                                            Industry Compliance Framework
                                        </label>
                                        <div class="field-value">SOC 2, ISO 27001, PCI DSS 3.2.1</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Ownership, Collaboration & Audit Trail Section -->
                            <div class="metamodel-section">
                                <div class="section-grid">
                                    <div class="field-group">
                                        <label class="field-label">
                                            Owner
                                        </label>
                                        <div class="field-value">Security Architecture Team</div>
                                    </div>

                                    <div class="field-group">
                                        <label class="field-label">
                                            Stakeholders
                                        </label>
                                        <div class="field-value">CISO, IAM Team, DevSecOps, Compliance</div>
                                    </div>

                                    <div class="field-group">
                                        <label class="field-label">
                                            Slack Channel
                                        </label>
                                        <div class="field-value">#security-mfa-implementation</div>
                                    </div>

                                    <div class="field-group">
                                        <label class="field-label">
                                            Excluded Countries
                                        </label>
                                        <div class="field-value">United Kingdom (UK)</div>
                                    </div>

                                    <div class="field-group">
                                        <label class="field-label">
                                            Created Date
                                        </label>
                                        <div class="field-value">2024-01-15</div>
                                    </div>

                                    <div class="field-group">
                                        <label class="field-label">
                                            Last Modified
                                        </label>
                                        <div class="field-value">2024-11-22</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h3 style="margin-top: 2rem; margin-bottom: 1rem; font-size: 1.125rem; font-weight: 700;">AWS Well-Architected Pillars</h3>
                        <div class="pillar-tags">
                            <div class="pillar-tag pillar-security">
                                <span>üõ°Ô∏è</span>
                                <a href="https://docs.aws.amazon.com/wellarchitected/latest/security-pillar/welcome.html" target="_blank">Security</a>
                            </div>
                            <div class="pillar-tag pillar-ops">
                                <span>‚öôÔ∏è</span>
                                <a href="https://docs.aws.amazon.com/wellarchitected/latest/operational-excellence-pillar/welcome.html" target="_blank">Operational Excellence</a>
                            </div>
                            <div class="pillar-tag pillar-reliability">
                                <span>üîÑ</span>
                                <a href="https://docs.aws.amazon.com/wellarchitected/latest/reliability-pillar/welcome.html" target="_blank">Reliability</a>
                            </div>
                        </div>

                        <h3 style="margin-top: 2rem; margin-bottom: 1rem; font-size: 1.125rem; font-weight: 700;">Well-Architected Best Practices</h3>
                        <div class="validation-rules">
                            <div class="validation-rule">
                                <strong><a href="https://docs.aws.amazon.com/wellarchitected/latest/framework/sec_identities_enforce_mfa.html" target="_blank" style="color: inherit;">SEC03-BP02</a>:</strong> Implement strong identity foundation with MFA
                            </div>
                            <div class="validation-rule">
                                <strong><a href="https://docs.aws.amazon.com/wellarchitected/latest/framework/sec_permissions_least_privileges.html" target="_blank" style="color: inherit;">SEC02-BP03</a>:</strong> Grant least privilege access with MFA enforcement
                            </div>
                            <div class="validation-rule">
                                <strong><a href="https://docs.aws.amazon.com/wellarchitected/latest/framework/ops_ops_model_empower_teams.html" target="_blank" style="color: inherit;">OPS05-BP01</a>:</strong> Use multi-factor authentication for operational access
                            </div>
                        </div>
                    </div>

                    <!-- Requirement Rules Tab -->
                    <div class="tab-panel" id="rules">
                        <h2 style="margin-bottom: 1.5rem; font-size: 1.25rem; font-weight: 700;">Requirement Rules</h2>
                        <p style="margin-bottom: 1.5rem; color: var(--gray-600);">
                            Specific, actionable sub-requirements that define how REQ-SEC-001 must be implemented and validated.
                        </p>

                        <div class="rules-section">
                            <div class="rule-item">
                                <div class="rule-header">
                                    <div class="rule-id">REQ-SEC-001.1</div>
                                    <div class="rule-type">Functional</div>
                                </div>
                                <div class="rule-content">
                                    <strong>MFA Factor Requirements:</strong> The system MUST require at least two (2) distinct authentication factors from different categories: something the user knows (password), something the user has (TOTP device, hardware token), or something the user is (biometric). Single-factor authentication SHALL NOT be permitted for any user account.
                                </div>
                                <div class="rule-control">
                                    <strong>Registered Control:</strong> CTRL-1106339, CTRL-1106338
                                </div>
                            </div>

                            <div class="rule-item">
                                <div class="rule-header">
                                    <div class="rule-id">REQ-SEC-001.2</div>
                                    <div class="rule-type">Functional</div>
                                </div>
                                <div class="rule-content">
                                    <strong>Supported MFA Methods:</strong> The authentication system MUST support the following MFA methods: Time-based One-Time Passwords (TOTP) per RFC 6238, WebAuthn/FIDO2 hardware tokens, and SMS-based codes as a fallback option. SMS MUST NOT be the primary MFA method for privileged accounts.
                                </div>
                                <div class="rule-control">
                                    <strong>Registered Control:</strong> CTRL-1106339, CTRL-1106173
                                </div>
                            </div>

                            <div class="rule-item">
                                <div class="rule-header">
                                    <div class="rule-id">REQ-SEC-001.3</div>
                                    <div class="rule-type">Non-Functional</div>
                                </div>
                                <div class="rule-content">
                                    <strong>New User Grace Period:</strong> New user accounts MUST complete MFA enrollment within twenty-four (24) hours of account creation. During this grace period, users MAY authenticate with single-factor credentials. After 24 hours, accounts without configured MFA SHALL be automatically disabled until MFA is enrolled.
                                </div>
                                <div class="rule-control">
                                    <strong>Registered Control:</strong> CTRL-1106173
                                </div>
                            </div>

                            <div class="rule-item">
                                <div class="rule-header">
                                    <div class="rule-id">REQ-SEC-001.4</div>
                                    <div class="rule-type">Non-Functional</div>
                                </div>
                                <div class="rule-content">
                                    <strong>MFA Session Duration:</strong> MFA verification MUST remain valid for a maximum of eight (8) hours for standard user sessions. Privileged administrative sessions MUST re-verify MFA every four (4) hours. Users SHALL be prompted to re-authenticate with MFA upon session expiration.
                                </div>
                                <div class="rule-control">
                                    <strong>Registered Control:</strong> CTRL-1106173
                                </div>
                            </div>

                            <div class="rule-item">
                                <div class="rule-header">
                                    <div class="rule-id">REQ-SEC-001.5</div>
                                    <div class="rule-type">Functional</div>
                                </div>
                                <div class="rule-content">
                                    <strong>Failed MFA Attempt Handling:</strong> The system MUST lock user accounts after three (3) consecutive failed MFA attempts within a fifteen (15) minute window. Account unlock MUST require either automated timeout after thirty (30) minutes OR manual administrator intervention. No unauthorized account access SHALL be permitted during lockout.
                                </div>
                                <div class="rule-control">
                                    <strong>Registered Control:</strong> CTRL-1106338, CTRL-1106339
                                </div>
                            </div>

                            <div class="rule-item">
                                <div class="rule-header">
                                    <div class="rule-id">REQ-SEC-001.6</div>
                                    <div class="rule-type">Non-Functional</div>
                                </div>
                                <div class="rule-content">
                                    <strong>MFA Audit Logging:</strong> All MFA-related events MUST be logged to the centralized audit system, including: successful authentications, failed attempts, MFA enrollment events, MFA method changes, and account lockouts. Logs MUST include timestamp, user identifier, IP address, authentication method, and event outcome.
                                </div>
                                <div class="rule-control">
                                    <strong>Registered Control:</strong> CTRL-1106173
                                </div>
                            </div>

                            <div class="rule-item">
                                <div class="rule-header">
                                    <div class="rule-id">REQ-SEC-001.7</div>
                                    <div class="rule-type">Functional</div>
                                </div>
                                <div class="rule-content">
                                    <strong>MFA Bypass Prohibition:</strong> No user, including system administrators, SHALL be able to bypass MFA requirements through configuration, code changes, or emergency access procedures except in documented disaster recovery scenarios approved by the CISO. All bypass events MUST trigger immediate security incident response.
                                </div>
                                <div class="rule-control">
                                    <strong>Registered Control:</strong> CTRL-1106339, CTRL-1106173
                                </div>
                            </div>

                            <div class="rule-item">
                                <div class="rule-header">
                                    <div class="rule-id">REQ-SEC-001.8</div>
                                    <div class="rule-type">Non-Functional</div>
                                </div>
                                <div class="rule-content">
                                    <strong>MFA Recovery Process:</strong> Users who lose access to their MFA device MUST complete an identity verification process before MFA reset. The recovery process SHALL require: (1) submission of government-issued ID, (2) verification by security team, and (3) approval by user's direct manager. Recovery requests MUST be completed within four (4) business hours.
                                </div>
                                <div class="rule-control">
                                    <strong>Registered Control:</strong> CTRL-1106173
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Policy-as-Code Tab -->
                    <div class="tab-panel" id="policy">
                        <h2 style="margin-bottom: 1rem; font-size: 1.25rem; font-weight: 700;">Policy-as-Code Validation</h2>
                        <p style="margin-bottom: 1.5rem; color: var(--gray-600);">
                            Open Policy Agent (OPA) policies for automated enforcement at deployment and runtime.
                        </p>

                        <h3 style="margin-bottom: 1rem; font-size: 1rem; font-weight: 700;">Deploy Phase: Blocking Policy</h3>
                        <p style="margin-bottom: 1rem; font-size: 0.875rem; color: var(--gray-600);">
                            This policy runs in the CI/CD pipeline during deployment to block releases that don't meet MFA requirements.
                        </p>

                        <div style="margin-bottom: 1.5rem; padding: 1rem; background: var(--gray-50); border-left: 4px solid var(--core-darkblue); border-radius: 4px;">
                            <h3 style="font-size: 0.875rem; font-weight: 700; color: var(--core-navy); margin-bottom: 0.5rem;">üìä Data Sources / Exchange APIs</h3>
                            <ul style="margin: 0; padding-left: 1.5rem; font-size: 0.8rem; color: var(--gray-700);">
                                <li><strong>Deployment Config:</strong> deployment.yaml</li>
                                <li><strong>Infrastructure as Code:</strong> terraform/*.tf</li>
                                <li><strong>Authentication Service Spec:</strong> auth-service/openapi.json</li>
                                <li><strong>Policy Registry:</strong> /api/v1/policies/mfa-config</li>
                            </ul>
                        </div>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-language">OPA Rego - Deploy Phase</span>
                                <div class="code-actions">
                                    <span class="code-version">v2.1.0 | Deploy | Rules: 1.1-1.7</span>
                                    <a href="https://github.com/your-org/tech-requirements/blob/main/policies/deploy/REQ-SEC-001-v2.1.0.rego" target="_blank" class="code-github">
                                        <span>‚ö°</span> GitHub
                                    </a>
                                    <button class="code-expand" onclick="toggleCode(this)">Expand</button>
                                    <button class="code-copy" onclick="copyCode(this)">Copy</button>
                                </div>
                            </div>
                            <div class="code-body">
                                <pre><span class="code-comment"># REQ-SEC-001: MFA Deployment Validation Policy</span>
<span class="code-comment"># Version: 2.1.0</span>
<span class="code-comment"># Phase: Deploy & Release</span>
<span class="code-comment"># Action: Block deployment if MFA not configured</span>

<span class="code-keyword">package</span> <span class="code-variable">deploy.security.mfa</span>

<span class="code-keyword">import</span> future.keywords.if
<span class="code-keyword">import</span> future.keywords.in

<span class="code-comment"># Default deny - fail closed</span>
<span class="code-keyword">default</span> allow_deployment = <span class="code-keyword">false</span>

<span class="code-comment"># BLOCKING: Deployment allowed only if MFA properly configured</span>
allow_deployment if {
    <span class="code-function">mfa_endpoints_configured</span>
    <span class="code-function">mfa_methods_supported</span>
    <span class="code-function">policy_enforcement_enabled</span>
    <span class="code-keyword">not</span> <span class="code-function">bypass_routes_exist</span>
}

<span class="code-comment"># Verify all authentication endpoints have MFA</span>
mfa_endpoints_configured if {
    auth_endpoints := input.deployment.auth_endpoints
    <span class="code-function">count</span>(auth_endpoints) > <span class="code-variable">0</span>
    <span class="code-function">every</span> endpoint <span class="code-keyword">in</span> auth_endpoints {
        endpoint.mfa_required == <span class="code-keyword">true</span>
    }
}

<span class="code-comment"># Verify required MFA methods are configured</span>
mfa_methods_supported if {
    supported_methods := input.deployment.mfa_config.supported_methods
    required := {<span class="code-string">"totp"</span>, <span class="code-string">"webauthn"</span>}
    required & supported_methods == required
}

<span class="code-comment"># Verify OPA policy enforcement is enabled</span>
policy_enforcement_enabled if {
    input.deployment.policy_engine.enabled == <span class="code-keyword">true</span>
    input.deployment.policy_engine.runtime_validation == <span class="code-keyword">true</span>
}

<span class="code-comment"># Check for MFA bypass routes (MUST NOT exist)</span>
bypass_routes_exist if {
    some route in input.deployment.routes
    route.auth_bypass == <span class="code-keyword">true</span>
}

bypass_routes_exist if {
    some config in input.deployment.feature_flags
    config.name == <span class="code-string">"disable_mfa"</span>
    config.enabled == <span class="code-keyword">true</span>
}

<span class="code-comment"># Deployment violations for pipeline blocking</span>
violations[msg] {
    <span class="code-keyword">not</span> mfa_endpoints_configured
    msg := <span class="code-string">"BLOCKING: Not all authentication endpoints require MFA"</span>
}

violations[msg] {
    <span class="code-keyword">not</span> mfa_methods_supported
    msg := <span class="code-string">"BLOCKING: Required MFA methods (TOTP, WebAuthn) not configured"</span>
}

violations[msg] {
    bypass_routes_exist
    msg := <span class="code-string">"BLOCKING: MFA bypass routes detected in deployment"</span>
}

violations[msg] {
    <span class="code-keyword">not</span> policy_enforcement_enabled
    msg := <span class="code-string">"BLOCKING: Runtime policy enforcement not enabled"</span>
}

<span class="code-comment"># Deployment decision with metadata</span>
deployment_decision = decision if {
    decision := {
        <span class="code-string">"requirement_id"</span>: <span class="code-string">"REQ-SEC-001"</span>,
        <span class="code-string">"version"</span>: <span class="code-string">"2.1.0"</span>,
        <span class="code-string">"phase"</span>: <span class="code-string">"deploy"</span>,
        <span class="code-string">"allowed"</span>: allow_deployment,
        <span class="code-string">"violations"</span>: violations,
        <span class="code-string">"timestamp"</span>: <span class="code-function">time.now_ns</span>(),
        <span class="code-string">"deployment_id"</span>: input.deployment.id
    }
}</pre>
                            </div>
                        </div>

                        <h3 style="margin-top: 2rem; margin-bottom: 1rem; font-size: 1rem; font-weight: 700;">Runtime Phase: Drift Detection Policy</h3>
                        <p style="margin-bottom: 1rem; font-size: 0.875rem; color: var(--gray-600);">
                            This policy runs continuously in production to detect and notify on MFA compliance drift.
                        </p>

                        <div style="margin-bottom: 1.5rem; padding: 1rem; background: var(--gray-50); border-left: 4px solid var(--core-teal); border-radius: 4px;">
                            <h3 style="font-size: 0.875rem; font-weight: 700; color: var(--core-navy); margin-bottom: 0.5rem;">üìä Data Sources / Exchange APIs</h3>
                            <ul style="margin: 0; padding-left: 1.5rem; font-size: 0.8rem; color: var(--gray-700);">
                                <li><strong>Identity API:</strong> /api/v1/users/{userId}/auth-status</li>
                                <li><strong>Session Management API:</strong> /api/v1/sessions/{sessionId}</li>
                                <li><strong>MFA Service:</strong> /api/v1/mfa/verification</li>
                                <li><strong>Audit Log Stream:</strong> security.auth.events</li>
                            </ul>
                        </div>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-language">OPA Rego - Runtime Phase</span>
                                <div class="code-actions">
                                    <span class="code-version">v2.1.0 | Runtime | Rules: 1.1-1.8</span>
                                    <a href="https://github.com/your-org/tech-requirements/blob/main/policies/runtime/REQ-SEC-001-v2.1.0.rego" target="_blank" class="code-github">
                                        <span>‚ö°</span> GitHub
                                    </a>
                                    <button class="code-expand" onclick="toggleCode(this)">Expand</button>
                                    <button class="code-copy" onclick="copyCode(this)">Copy</button>
                                </div>
                            </div>
                            <div class="code-body">
                                <pre><span class="code-comment"># REQ-SEC-001: MFA Runtime Compliance Monitoring</span>
<span class="code-comment"># Version: 2.1.0</span>
<span class="code-comment"># Phase: Runtime (Monitor & Maintain)</span>

<span class="code-keyword">package</span> nfr.CY_IAM_08.v2_0_1

<span class="code-keyword">import</span> data.nfr.lib.string.trim_and_lower
<span class="code-keyword">import</span> data.nfr.lib.utep
<span class="code-keyword">import</span> future.keywords.contains
<span class="code-keyword">import</span> future.keywords.if
<span class="code-keyword">import</span> future.keywords.in

required_fields := [<span class="code-string">"installStatus"</span>, <span class="code-string">"webasedInterface"</span>, <span class="code-string">"c1Workforce"</span>, <span class="code-string">"mfaAuthStatus"</span>]

type_path := [
    <span class="code-string">"Information Security (2701.1.001)"</span>,
    <span class="code-string">"PROTECT (2.0)"</span>,
    <span class="code-string">"Identity Management, Authentication, and Access Control (2.1)"</span>,
]

<span class="code-comment"># -------------</span>
<span class="code-comment"># Applicability</span>
<span class="code-comment"># -------------</span>
<span class="code-keyword">default</span> is_applicable := <span class="code-keyword">false</span>

is_applicable if {
    <span class="code-function">trim_and_lower</span>(input.webasedInterface) == <span class="code-string">"true"</span>
    <span class="code-function">trim_and_lower</span>(input.c1Workforce) == <span class="code-string">"true"</span>
    input.installStatus == <span class="code-variable">1</span>
}

applicability := {<span class="code-string">"is_applicable"</span>: is_applicable}

<span class="code-keyword">default</span> is_required := <span class="code-keyword">true</span>

required := {<span class="code-string">"is_required"</span>: is_required}

<span class="code-comment"># ----------</span>
<span class="code-comment"># Compliance</span>
<span class="code-comment"># ----------</span>
is_mfa(mfaAuthStatus) if {
    <span class="code-function">trim_and_lower</span>(mfaAuthStatus) == <span class="code-string">"cof approved mfa enabled"</span>
}

violations contains mfa_violation if {
    <span class="code-keyword">not</span> <span class="code-function">is_mfa</span>(input.mfaAuthStatus)
    mfa_violation := <span class="code-string">\"Your BA is NOT compliant with CY_IAM_O8 because \" +</span>
        <span class="code-string">\"it is NOT integrated with SSO/MFA and it is NOT exempted from using SSO/MFA\"</span>
}

compliance := {
    <span class="code-string">"compliant"</span>: <span class="code-function">count</span>(violations) == <span class="code-variable">0</span>,
    <span class="code-string">"uteps"</span>: <span class="code-function">utep.all_matches</span>(type_path),
    <span class="code-string">"violations"</span>: violations,
}</pre>
                            </div>
                        </div>
                    </div>

                    <!-- Agent Instructions Tab -->
                    <div class="tab-panel" id="agents">
                        <h2 style="margin-bottom: 1rem; font-size: 1.25rem; font-weight: 700;">Agent Instructions</h2>
                        <p style="margin-bottom: 1.5rem; color: var(--gray-600);">
                            Instructions for AI agents to implement and validate this requirement during Plan & Design and Build & Test phases.
                        </p>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-language">Markdown - Agent Instructions</span>
                                <div class="code-actions">
                                    <span class="code-version">v2.1.0 | Plan & Build | Rules: All</span>
                                    <a href="https://github.com/your-org/tech-requirements/blob/main/agents/REQ-SEC-001-agents-v2.1.0.md" target="_blank" class="code-github">
                                        <span>‚ö°</span> GitHub
                                    </a>
                                    <button class="code-expand" onclick="toggleCode(this)">Expand</button>
                                    <button class="code-copy" onclick="copyCode(this)">Copy</button>
                                </div>
                            </div>
                            <div class="code-body">
                                <pre># Agent Instructions: REQ-SEC-001
**Requirement:** Multi-Factor Authentication Implementation  
**Version:** 2.1.0  
**Applicable Phases:** Plan & Design, Build & Test

---

## Agent Roles

### Planning Agent (Plan & Design Phase)
**Objective:** Identify MFA requirements in system architecture and design

**When to trigger:**
- Architecture review sessions
- Security requirements gathering
- API endpoint design
- User authentication flow design

**Tasks:**
1. Scan architecture diagrams for authentication endpoints
2. Identify all user-facing access points
3. Flag missing MFA integration points
4. Recommend MFA provider integration (Okta, Auth0, Azure AD)
5. Generate MFA implementation checklist

---

### Development Agent (Build & Test Phase)
**Objective:** Assist developers in implementing MFA-compliant code

**When to trigger:**
- Developer writes authentication code
- Pull request includes auth endpoints
- Developer asks about MFA implementation
- Code review detects auth changes

**Prompt Template:**
```
I notice you're working on authentication logic. This system requires 
multi-factor authentication per REQ-SEC-001.

Would you like me to:
1. Generate MFA-compliant authentication code?
2. Show examples of TOTP/WebAuthn integration?
3. Add MFA validation to your current implementation?
4. Review your code for MFA compliance?

[Current code context: {code_snippet}]
```

---

## Agentic Rules

### Hard Rules (MUST - Cannot be overridden)

**Rule 1: No Single-Factor Auth**
```yaml
condition: if authentication_endpoint_detected
action: ENFORCE mfa_required = true
override: not_allowed
violation: block_merge
```

**Rule 2: Minimum Two Factors**
```yaml
condition: if mfa_implementation_detected
action: VALIDATE factor_count >= 2
override: not_allowed  
violation: block_deployment
```

**Rule 3: Grace Period Enforcement**
```yaml
condition: if new_user_account_created
action: SET grace_period_hours = 24
then: AUTO_DISABLE account if mfa_not_enrolled
override: not_allowed
violation: auto_remediate
```

**Rule 4: No MFA Bypass Routes**
```yaml
condition: if code_contains(auth_bypass) OR code_contains(skip_mfa)
action: BLOCK commit
message: "MFA bypass prohibited per REQ-SEC-001.7"
override: requires_ciso_approval
```

---

### Soft Rules (SHOULD - Can be overridden with justification)

**Rule 5: Prefer Hardware Tokens**
```yaml
condition: if user_role == "privileged"
action: RECOMMEND webauthn_over_sms
override: allowed_with_justification
suggestion: "Hardware tokens provide stronger security for admin accounts"
```

**Rule 6: Session Duration**
```yaml
condition: if mfa_session_duration > 8_hours
action: WARN developer
message: "Consider shorter session duration per REQ-SEC-001.4"
override: allowed_with_risk_acceptance
```

---

## Guardrails

### Pre-Commit Guardrails
- **Scan for:** auth endpoints without MFA checks
- **Scan for:** feature flags disabling MFA  
- **Scan for:** hardcoded bypass credentials
- **Action:** Block commit + provide remediation steps

### Pre-Deployment Guardrails  
- **Validate:** OPA policy enforcement enabled
- **Validate:** All auth endpoints in deployment manifest
- **Validate:** MFA methods configured (TOTP + WebAuthn)
- **Action:** Block deployment if validation fails

### Runtime Guardrails
- **Monitor:** MFA success/failure rates
- **Monitor:** Grace period expiration events
- **Monitor:** MFA bypass attempts
- **Action:** Alert security team on anomalies

---

## Workflow Integration

### Plan & Design Phase Workflow

```mermaid
graph TD
    A[Architecture Review] --> B{Auth Endpoints Found?}
    B -->|Yes| C[Agent: Check MFA Integration]
    B -->|No| D[Continue Review]
    C --> E{MFA Configured?}
    E -->|No| F[Agent: Generate MFA Requirements]
    E -->|Yes| G[Agent: Validate Configuration]
    F --> H[Add to Backlog]
    G --> I{Compliant?}
    I -->|No| F
    I -->|Yes| J[Approve Design]
```

**Agent Actions:**
1. Parse architecture diagrams for auth components
2. Cross-reference with requirement rules
3. Generate compliance checklist  
4. Add MFA tasks to sprint backlog
5. Assign tasks to appropriate team members

---

### Build & Test Phase Workflow

```mermaid
graph TD
    A[Developer Writes Code] --> B{Contains Auth Logic?}
    B -->|Yes| C[Agent: Scan for MFA]
    B -->|No| D[Standard Code Review]
    C --> E{MFA Implemented?}
    E -->|No| F[Agent: Prompt Developer]
    E -->|Yes| G[Agent: Validate Implementation]
    F --> H{Developer Accepts?}
    H -->|Yes| I[Agent: Generate Code]
    H -->|No| J[Manual Implementation]
    I --> G
    G --> K{Passes Rules?}
    K -->|No| L[Agent: Provide Feedback]
    K -->|Yes| M[Allow Merge]
    L --> F
```

**Agent Actions:**
1. **On Code Write:** Detect auth-related code patterns
2. **Prompt Developer:** "Would you like MFA implementation assistance?"
3. **If Accepted:** Generate compliant code snippets
4. **Validate:** Run REQ-SEC-001 rules against code
5. **Feedback Loop:** Suggest improvements until compliant

---

## Code Generation Examples

### Example 1: Express.js Middleware
When developer needs MFA validation in Express app:

```javascript
// Agent-generated MFA middleware (REQ-SEC-001 compliant)
const validateMFA = async (req, res, next) => {
  // Rule REQ-SEC-001.1: Require 2+ factors
  const factors = req.session.auth?.factors || [];
  
  if (factors.length < 2) {
    return res.status(401).json({
      error: 'MFA required',
      requirement: 'REQ-SEC-001.1'
    });
  }
  
  // Rule REQ-SEC-001.4: Check session expiration
  const mfaAge = Date.now() - req.session.auth.mfa_timestamp;
  const maxAge = req.user.role === 'admin' ? 4 * 60 * 60 * 1000 : 8 * 60 * 60 * 1000;
  
  if (mfaAge > maxAge) {
    return res.status(401).json({
      error: 'MFA session expired',
      requirement: 'REQ-SEC-001.4'
    });
  }
  
  next();
};
```

### Example 2: OPA Policy Test
When developer needs to test policy:

```rego
# Agent-generated test (REQ-SEC-001 compliant)
test_valid_mfa_allowed {
    allow with input as {
        "user": {"id": "user123", "role": "standard"},
        "auth": {
            "mfa_verified": true,
            "mfa_timestamp": time.now_ns(),
            "factors": ["password", "totp"]
        }
    }
}

test_insufficient_factors_denied {
    not allow with input as {
        "user": {"id": "user123"},
        "auth": {
            "mfa_verified": false,
            "factors": ["password"]
        }
    }
}
```

---

## Success Criteria

Agent successfully assists when:
- ‚úÖ MFA identified in 100% of architecture reviews
- ‚úÖ Developers accept agent MFA suggestions >80% of time  
- ‚úÖ Zero MFA violations reach production
- ‚úÖ Average implementation time reduced by 50%
- ‚úÖ All generated code passes REQ-SEC-001 rules

---

## Error Handling

### When Agent Cannot Proceed:
1. **Missing Context:** Request additional information from developer
2. **Ambiguous Code:** Ask clarifying questions
3. **Complex Scenario:** Escalate to human security architect
4. **Rule Conflict:** Present options with trade-offs

### Escalation Triggers:
- Developer requests MFA bypass (Rule violation)
- Conflicting requirements detected
- Security pattern not in agent knowledge base
- Compliance framework interpretation needed</pre>
                            </div>
                        </div>
                    </div>

                    <!-- Validation Tab -->
                    <div class="tab-panel" id="validation">
                        <h2 style="margin-bottom: 1.5rem; font-size: 1.25rem; font-weight: 700;">Validation & Testing</h2>
                        
                        <h3 style="margin-bottom: 1rem; font-size: 1.125rem; font-weight: 700;">Validation Rules</h3>
                        <div class="validation-rules">
                            <div class="validation-rule">
                                ‚úì All authentication endpoints implement MFA verification
                            </div>
                            <div class="validation-rule">
                                ‚úì OPA policies deployed to both deploy and runtime environments
                            </div>
                            <div class="validation-rule">
                                ‚úì Minimum 2 authentication factors enforced (REQ-SEC-001.1)
                            </div>
                            <div class="validation-rule">
                                ‚úì Grace period mechanism implemented for new users (REQ-SEC-001.3)
                            </div>
                            <div class="validation-rule warning">
                                ‚ö† 12 accounts pending MFA enrollment (within 24h grace period)
                            </div>
                            <div class="validation-rule">
                                ‚úì Audit logging capturing all MFA events (REQ-SEC-001.6)
                            </div>
                            <div class="validation-rule">
                                ‚úì Session expiration enforced: 8h standard, 4h privileged (REQ-SEC-001.4)
                            </div>
                            <div class="validation-rule">
                                ‚úì Account lockout after 3 failed attempts (REQ-SEC-001.5)
                            </div>
                        </div>

                        <h3 style="margin-top: 2rem; margin-bottom: 1rem; font-size: 1.125rem; font-weight: 700;">Test Coverage</h3>
                        <div class="validation-rules">
                            <div class="validation-rule">
                                <strong>Unit Tests:</strong> 147 tests covering MFA validation logic (98% coverage)
                            </div>
                            <div class="validation-rule">
                                <strong>Integration Tests:</strong> 34 tests for authentication flows with multiple factors
                            </div>
                            <div class="validation-rule">
                                <strong>E2E Tests:</strong> 12 scenarios covering user journey with MFA enrollment
                            </div>
                            <div class="validation-rule">
                                <strong>Security Tests:</strong> Penetration testing completed Q4 2024
                            </div>
                        </div>

                        <h3 style="margin-top: 2rem; margin-bottom: 1rem; font-size: 1.125rem; font-weight: 700;">Compliance Status</h3>
                        <div class="validation-rules">
                            <div class="validation-rule">
                                <strong>SOC 2 Type II:</strong> Compliant - Control CC6.1 satisfied
                            </div>
                            <div class="validation-rule">
                                <strong>ISO 27001:</strong> Compliant - Controls A.9.4.2, A.9.4.3 satisfied
                            </div>
                            <div class="validation-rule">
                                <strong>PCI DSS 3.2.1:</strong> Compliant - Requirement 8.3 satisfied
                            </div>
                            <div class="validation-rule">
                                <strong>NIST 800-53:</strong> Compliant - Controls IA-2(1), IA-2(2) satisfied
                            </div>
                        </div>
                    </div>

                                                            <!-- Stakeholder Accountability Tab -->
                    <div class="tab-panel" id="accountability">
                        <h2 style="margin-bottom: 0.5rem; font-size: 1.25rem; font-weight: 700;">Accountable</h2>
                        <p style="margin-bottom: 2rem; color: var(--gray-600); font-size: 0.9rem;">
                            Accountability hierarchy and responsible parties.
                        </p>

                        <!-- Hierarchy Structure -->
                        <div style="font-family: 'Work Sans', sans-serif; max-width: 900px;">
                            
                            <!-- Policy Level -->
                            <div style="margin-bottom: 2rem;">
                                <div style="font-weight: 700; font-size: 1rem; color: var(--core-navy); margin-bottom: 0.75rem;">
                                    2701 Information Security Policy
                                </div>
                                <div style="margin-left: 2rem; padding: 0.75rem; background: var(--gray-50); border-left: 3px solid var(--core-blue); margin-bottom: 0.5rem;">
                                    <div style="font-size: 0.75rem; text-transform: uppercase; color: var(--gray-500); font-weight: 600; margin-bottom: 0.25rem;">Document Manager</div>
                                    <div style="font-weight: 600; color: var(--gray-900);">Jane Smith</div>
                                    <div style="font-size: 0.85rem; color: var(--core-blue); margin-top: 0.25rem;">
                                        <a href="#" class="slack-link">@jane.smith</a>
                                    </div>
                                </div>
                            </div>

                            <!-- Standard Level -->
                            <div style="margin-bottom: 2rem;">
                                <div style="font-weight: 700; font-size: 1rem; color: var(--core-navy); margin-bottom: 0.75rem;">
                                    2701.1.001 Information Security Standard
                                </div>
                                <div style="margin-left: 2rem; padding: 0.75rem; background: var(--gray-50); border-left: 3px solid var(--core-blue); margin-bottom: 0.5rem;">
                                    <div style="font-size: 0.75rem; text-transform: uppercase; color: var(--gray-500); font-weight: 600; margin-bottom: 0.25rem;">Document Manager</div>
                                    <div style="font-weight: 600; color: var(--gray-900);">Michael Chen</div>
                                    <div style="font-size: 0.85rem; color: var(--core-blue); margin-top: 0.25rem;">
                                        <a href="#" class="slack-link">@michael.chen</a>
                                    </div>
                                </div>
                            </div>

                            <!-- Requirement Level -->
                            <div style="margin-bottom: 2rem;">
                                <div style="font-weight: 700; font-size: 1rem; color: var(--core-navy); margin-bottom: 0.75rem;">
                                    REQ-SEC-001: Multi-Factor Authentication
                                </div>
                                
                                <div style="margin-left: 2rem;">
                                    <div style="padding: 0.75rem; background: var(--gray-50); border-left: 3px solid var(--core-blue); margin-bottom: 0.5rem;">
                                        <div style="font-size: 0.75rem; text-transform: uppercase; color: var(--gray-500); font-weight: 600; margin-bottom: 0.25rem;">Requirement Owner</div>
                                        <div style="font-weight: 600; color: var(--gray-900);">Sarah Johnson</div>
                                        <div style="font-size: 0.85rem; color: var(--core-blue); margin-top: 0.25rem;">
                                            <a href="#" class="slack-link">@sarah.johnson</a>
                                        </div>
                                    </div>

                                    <div style="padding: 0.75rem; background: var(--gray-50); border-left: 3px solid var(--core-blue); margin-bottom: 0.5rem;">
                                        <div style="font-size: 0.75rem; text-transform: uppercase; color: var(--gray-500); font-weight: 600; margin-bottom: 0.25rem;">EA Risk Partner</div>
                                        <div style="font-weight: 600; color: var(--gray-900);">David Lee</div>
                                        <div style="font-size: 0.85rem; color: var(--core-blue); margin-top: 0.25rem;">
                                            <a href="#" class="slack-link">@david.lee</a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Controls Level -->
                            <div style="margin-bottom: 2rem;">
                                <div style="font-weight: 700; font-size: 1rem; color: var(--core-navy); margin-bottom: 0.75rem;">
                                    Controls
                                </div>
                                
                                <div style="margin-left: 2rem;">
                                    <div style="padding: 0.75rem; background: var(--gray-50); border-left: 3px solid var(--core-blue); margin-bottom: 0.5rem;">
                                        <div style="font-size: 0.75rem; text-transform: uppercase; color: var(--gray-500); font-weight: 600; margin-bottom: 0.25rem;">Control Owner</div>
                                        <div style="font-size: 0.8rem; color: var(--gray-600); margin-bottom: 0.25rem;">CTRL-1106339: Password Configuration - Non-SSO Database Layer</div>
                                        <div style="font-weight: 600; color: var(--gray-900);">David Martinez</div>
                                        <div style="font-size: 0.85rem; color: var(--core-blue); margin-top: 0.25rem;">
                                            <a href="#" class="slack-link">@david.martinez</a>
                                        </div>
                                    </div>

                                    <div style="padding: 0.75rem; background: var(--gray-50); border-left: 3px solid var(--core-blue); margin-bottom: 0.5rem;">
                                        <div style="font-size: 0.75rem; text-transform: uppercase; color: var(--gray-500); font-weight: 600; margin-bottom: 0.25rem;">Control Owner</div>
                                        <div style="font-size: 0.8rem; color: var(--gray-600); margin-bottom: 0.25rem;">CTRL-1106338: Password Configuration - Non-SSO Application Layer</div>
                                        <div style="font-weight: 600; color: var(--gray-900);">Lisa Thompson</div>
                                        <div style="font-size: 0.85rem; color: var(--core-blue); margin-top: 0.25rem;">
                                            <a href="#" class="slack-link">@lisa.thompson</a>
                                        </div>
                                    </div>

                                    <div style="padding: 0.75rem; background: var(--gray-50); border-left: 3px solid var(--core-blue); margin-bottom: 0.5rem;">
                                        <div style="font-size: 0.75rem; text-transform: uppercase; color: var(--gray-500); font-weight: 600; margin-bottom: 0.25rem;">Control Owner</div>
                                        <div style="font-size: 0.8rem; color: var(--gray-600); margin-bottom: 0.25rem;">CTRL-1106173: SSO Application Authentication Session Management</div>
                                        <div style="font-weight: 600; color: var(--gray-900);">Robert Kim</div>
                                        <div style="font-size: 0.85rem; color: var(--core-blue); margin-top: 0.25rem;">
                                            <a href="#" class="slack-link">@robert.kim</a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Engineering Teams -->
                            <div style="margin-bottom: 2rem;">
                                <div style="font-weight: 700; font-size: 1rem; color: var(--core-navy); margin-bottom: 0.75rem;">
                                    Engineering Teams
                                </div>
                                
                                <div style="margin-left: 2rem;">
                                    <div style="padding: 0.75rem; background: var(--gray-50); border-left: 3px solid var(--core-blue); margin-bottom: 0.5rem;">
                                        <div style="font-size: 0.75rem; text-transform: uppercase; color: var(--gray-500); font-weight: 600; margin-bottom: 0.25rem;">Build Phase Automation Maintenance</div>
                                        <div style="font-weight: 600; color: var(--gray-900);">DevNavHub Engineering Team</div>
                                        <div style="font-size: 0.8rem; color: var(--gray-600); margin-top: 0.25rem;">Marcus Thompson</div>
                                        <div style="font-size: 0.85rem; color: var(--core-blue); margin-top: 0.25rem;">
                                            <a href="#" class="slack-link">@marcus.thompson</a>
                                        </div>
                                    </div>

                                    <div style="padding: 0.75rem; background: var(--gray-50); border-left: 3px solid var(--core-blue); margin-bottom: 0.5rem;">
                                        <div style="font-size: 0.75rem; text-transform: uppercase; color: var(--gray-500); font-weight: 600; margin-bottom: 0.25rem;">Deploy Phase Automation Maintenance</div>
                                        <div style="font-weight: 600; color: var(--gray-900);">OPL Engineering Team</div>
                                        <div style="font-size: 0.8rem; color: var(--gray-600); margin-top: 0.25rem;">Alex Wong</div>
                                        <div style="font-size: 0.85rem; color: var(--core-blue); margin-top: 0.25rem;">
                                            <a href="#" class="slack-link">@alex.wong</a>
                                        </div>
                                    </div>

                                    <div style="padding: 0.75rem; background: var(--gray-50); border-left: 3px solid var(--core-blue); margin-bottom: 0.5rem;">
                                        <div style="font-size: 0.75rem; text-transform: uppercase; color: var(--gray-500); font-weight: 600; margin-bottom: 0.25rem;">Monitor Phase Automation Maintenance</div>
                                        <div style="font-weight: 600; color: var(--gray-900);">EA Engineering Team</div>
                                        <div style="font-size: 0.8rem; color: var(--gray-600); margin-top: 0.25rem;">Priya Patel</div>
                                        <div style="font-size: 0.85rem; color: var(--core-blue); margin-top: 0.25rem;">
                                            <a href="#" class="slack-link">@priya.patel</a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Procedure Level -->
                            <div style="margin-bottom: 2rem;">
                                <div style="font-weight: 700; font-size: 1rem; color: var(--core-navy); margin-bottom: 0.75rem;">
                                    Authentication & Identity Proofing Procedure [2701.2.059]
                                </div>
                                <div style="margin-left: 2rem; padding: 0.75rem; background: var(--gray-50); border-left: 3px solid var(--core-blue); margin-bottom: 0.5rem;">
                                    <div style="font-size: 0.75rem; text-transform: uppercase; color: var(--gray-500); font-weight: 600; margin-bottom: 0.25rem;">Document Manager</div>
                                    <div style="font-weight: 600; color: var(--gray-900);">Emily Davis</div>
                                    <div style="font-size: 0.85rem; color: var(--core-blue); margin-top: 0.25rem;">
                                        <a href="#" class="slack-link">@emily.davis</a>
                                    </div>
                                </div>
                            </div>

                            <!-- Leadership (Outside Hierarchy) -->
                            <div style="margin-top: 3rem; padding-top: 2rem; border-top: 2px solid var(--core-gray);">
                                <div style="font-weight: 700; font-size: 1rem; color: var(--core-navy); margin-bottom: 0.75rem;">
                                    Security Pillar
                                </div>
                                
                                <div style="margin-left: 2rem;">
                                    <div style="padding: 0.75rem; background: var(--gray-50); border-left: 3px solid var(--core-darkblue); margin-bottom: 0.5rem;">
                                        <div style="font-size: 0.75rem; text-transform: uppercase; color: var(--gray-500); font-weight: 600; margin-bottom: 0.25rem;">Pillar Champion</div>
                                        <div style="font-weight: 600; color: var(--gray-900);">James Wilson</div>
                                        <div style="font-size: 0.85rem; color: var(--core-blue); margin-top: 0.25rem;">
                                            <a href="#" class="slack-link">@james.wilson</a>
                                        </div>
                                    </div>

                                    <div style="padding: 0.75rem; background: var(--gray-50); border-left: 3px solid var(--core-darkblue); margin-bottom: 0.5rem;">
                                        <div style="font-size: 0.75rem; text-transform: uppercase; color: var(--gray-500); font-weight: 600; margin-bottom: 0.25rem;">Pillar Accountable Executive</div>
                                        <div style="font-weight: 600; color: var(--gray-900);">Dr. Amanda Rodriguez</div>
                                        <div style="font-size: 0.8rem; color: var(--gray-600); margin-top: 0.25rem;">Chief Information Security Officer (CISO)</div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-card">
                <h3 class="sidebar-title">Requirement Info</h3>
                <div class="info-list">
                    <div class="info-item">
                        <div class="info-label">Implementation Status</div>
                        <div class="info-value">‚úì Deployed to Production</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Target Release</div>
                        <div class="info-value">v2.1.0 (Released)</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Certified</div>
                        <div class="info-value">2025-03-15</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Applicability</div>
                        <div class="info-value">
                            <div class="applicability-tags">
                                <span class="applicability-tag">WebInterface</span>
                                <span class="applicability-tag">C1_Workforce</span>
                                <span class="applicability-tag">In Production</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            

            <div class="sidebar-card">
                <h3 class="sidebar-title">Traceability</h3>
                <div class="trace-tree">
                    <div class="trace-level-0">
                        <span class="trace-icon">üìã</span>2701 Information Security Policy
                    </div>
                    <div class="trace-level-1">
                        <span class="trace-icon">üìÑ</span>2701.1.001 Information Security Standard
                    </div>
                    <div class="trace-level-2">
                        <span class="trace-icon">üìå</span>REQ-SEC-001: Multi-Factor Authentication
                    </div>
                    <div class="trace-level-3">
                        <span class="trace-icon">üîí</span>CTRL-1106339: Password Configuration - Non-SSO Database Layer [Cyber]
                    </div>
                    <div class="trace-level-3">
                        <span class="trace-icon">‚ö°</span><a href="https://github.com/your-org/tech-requirements/blob/main/policies/deploy/REQ-SEC-001-v2.1.0.rego" target="_blank">deploy-policy.rego (v2.1.0)</a>
                    </div>
                    <div class="trace-level-3">
                        <span class="trace-icon">‚ö°</span><a href="https://github.com/your-org/tech-requirements/blob/main/policies/runtime/REQ-SEC-001-v2.1.0.rego" target="_blank">runtime-policy.rego (v2.1.0)</a>
                    </div>
                    <div class="trace-level-3">
                        <span class="trace-icon">ü§ñ</span><a href="https://github.com/your-org/tech-requirements/blob/main/agents/REQ-SEC-001-agents-v2.1.0.md" target="_blank">agent-instructions.md (v2.1.0)</a>
                    </div>
                    <div class="trace-level-3">
                        <span class="trace-icon">üîç</span>CTRL-1106338: Password Configuration - Non-SSO Application Layer [Cyber]
                    </div>
                    <div class="trace-level-3">
                        <span class="trace-icon">‚ö°</span><a href="https://github.com/your-org/tech-requirements/blob/main/policies/deploy/REQ-SEC-001-v2.1.0.rego" target="_blank">deploy-policy.rego (v2.1.0)</a>
                    </div>
                    <div class="trace-level-3">
                        <span class="trace-icon">‚ö°</span><a href="https://github.com/your-org/tech-requirements/blob/main/policies/runtime/REQ-SEC-001-v2.1.0.rego" target="_blank">runtime-policy.rego (v2.1.0)</a>
                    </div>
                    <div class="trace-level-3">
                        <span class="trace-icon">üìä</span>CTRL-1106173: SSO Application Authentication Session Management
                    </div>
                    <div class="trace-level-3">
                        <span class="trace-icon">‚ö°</span><a href="https://github.com/your-org/tech-requirements/blob/main/policies/runtime/REQ-SEC-001-v2.1.0.rego" target="_blank">runtime-policy.rego (v2.1.0)</a>
                    </div>
                    
                    <div style="margin-top: 1rem;" class="trace-level-1">
                        <span class="trace-icon">üìã</span>Authentication & Identity Proofing Procedure [2701.2.059]
                    </div>
                    <div class="trace-level-2">
                        <span class="trace-icon">üìå</span>REQ-SEC-001.3: Grace Period Enforcement
                    </div>
                    <div class="trace-level-3">
                        <span class="trace-icon">üîí</span>CTRL-1106173: SSO Application Authentication Session Management
                    </div>
                    <div class="trace-level-3">
                        <span class="trace-icon">‚ö°</span><a href="https://github.com/your-org/tech-requirements/blob/main/policies/runtime/REQ-SEC-001-v2.1.0.rego" target="_blank">runtime-policy.rego (v2.1.0)</a>
                    </div>
                    <div class="trace-level-3">
                        <span class="trace-icon">ü§ñ</span><a href="https://github.com/your-org/tech-requirements/blob/main/agents/REQ-SEC-001-agents-v2.1.0.md" target="_blank">agent-instructions.md (v2.1.0)</a>
                    </div>
                </div>
            </div>

            <div class="sidebar-card">
                <h3 class="sidebar-title">Tags</h3>
                <div class="tag-list">
                    <span class="tag">authentication</span>
                    <span class="tag">mfa</span>
                    <span class="tag">security</span>
                    <span class="tag">identity</span>
                    <span class="tag">compliance</span>
                    <span class="tag">critical</span>
                </div>
            </div>

            <div class="sidebar-card">
                <h3 class="sidebar-title">Resources</h3>
                <div class="link-list">
                    <a href="https://pages.nist.gov/800-63-3/sp800-63b.html" target="_blank" class="link-item">
                        <span>üìñ</span>
                        NIST 800-63B
                    </a>
                    <a href="https://datatracker.ietf.org/doc/html/rfc6238" target="_blank" class="link-item">
                        <span>üìñ</span>
                        RFC 6238 (TOTP)
                    </a>
                    <a href="https://www.w3.org/TR/webauthn/" target="_blank" class="link-item">
                        <span>üìñ</span>
                        WebAuthn Specification
                    </a>
                </div>
            </div>

            <div class="sidebar-card">
                <h3 class="sidebar-title">Related Requirements</h3>
                <div class="link-list">
                    <a href="#" class="link-item">
                        <span>‚Üí</span>
                        REQ-SEC-002: Password Policy
                    </a>
                    <a href="#" class="link-item">
                        <span>‚Üí</span>
                        REQ-SEC-005: Session Management
                    </a>
                    <a href="#" class="link-item">
                        <span>‚Üí</span>
                        REQ-OPS-012: Audit Logging
                    </a>
                </div>
            </div>
        </aside>
    </div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // Tab switching functionality
        const tabs = document.querySelectorAll('.tab');
        const tabPanels = document.querySelectorAll('.tab-panel');

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const targetTab = tab.getAttribute('data-tab');
                
                // Remove active class from all tabs and panels
                tabs.forEach(t => t.classList.remove('active'));
                tabPanels.forEach(p => p.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding panel
                tab.classList.add('active');
                document.getElementById(targetTab).classList.add('active');
            });
        });

        // Code expansion functionality
        function toggleCode(button) {
            const codeBody = button.closest('.code-block').querySelector('.code-body');
            codeBody.classList.toggle('expanded');
            button.textContent = codeBody.classList.contains('expanded') ? 'Collapse' : 'Expand';
        }

        // Code copy functionality
        function copyCode(button) {
            const codeBlock = button.closest('.code-block').querySelector('pre');
            const textToCopy = codeBlock.textContent;
            
            navigator.clipboard.writeText(textToCopy).then(() => {                const originalText = button.textContent;
                button.textContent = 'Copied!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            });
        }

        // Email copy functionality
        function copyEmail(button, email) {
            navigator.clipboard.writeText(email).then(() => {
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.style.background = '#10b981';
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
                button.textContent = 'Failed';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            });
        }

        // Smooth fade-in animation on load
        window.addEventListener('load', () => {
            const elements = document.querySelectorAll('.req-header-top, .req-header-meta, .sdlc-phases, .tabs');
            elements.forEach((el, index) => {
                setTimeout(() => {
                    el.style.opacity = '0';
                    el.style.transform = 'translateY(10px)';
                    el.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                    
                    requestAnimationFrame(() => {
                        el.style.opacity = '1';
                        el.style.transform = 'translateY(0)';
                    });
                }, index * 100);
            });
        });
    </script>
</body>
</html>
